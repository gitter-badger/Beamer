<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: signup-controller.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: signup-controller.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>angular.module('beamer.controllers.signup', [])

.controller('SignupController', ["$scope", "auth", "$location",

    /** Creates user obj with form info and sends it off for authentication.*/
    function($scope, auth, $location) {

        $scope.signup = function() {
            if ($scope.user.pwd1 === $scope.user.pwd2) {
                var user = {
                    email: $scope.user.newEmail,
                    password: $scope.user.pwd1
                };
                auth.createNewUser(user).then(this.signupSuccess, this.signupErr);
            } else {
                $scope.error = "passwords don't match";
            }
        };
        $scope.login = function() {
            var user = {
                email: $scope.user.email,
                password: $scope.user.pwd
            };
            auth.loginUser(user).then(this.loginSuccess, this.loginError);
        };

        /** This parses the error and adds it to the scope to be shown*/
        this.signupErr = function(res) {
            var errorObj = res.data.err;
            var errors = Object.keys(errorObj.invalidAttributes);
            var length = errors.length;

            for (var i = 0; i &lt; length; i++) {
                if (errors[i] == 'email') {
                    $scope.error = errorObj.invalidAttributes.email[0].message;
                }
            }
        };
        /** A successful signup routes view to profile*/
        this.signupSuccess = function(res) {
            console.log(res);
            $location.path("/profile");
        };
        /** Adds the login error to the scope to be shown*/
        this.loginError = function(res) {
            $scope.error = res.data.err;
        };
        /** A successful login routes view to profile*/
        this.loginSuccess = function(res) {
            console.log(res);
            $location.path("/profile");
        };
    }
]);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#loginError">loginError</a></li><li><a href="global.html#loginSuccess">loginSuccess</a></li><li><a href="global.html#signupErr">signupErr</a></li><li><a href="global.html#signupSuccess">signupSuccess</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.3</a> on Wed Oct 21 2015 16:28:50 GMT-0700 (PDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
